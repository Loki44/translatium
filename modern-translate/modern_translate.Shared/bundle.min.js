!function(){"use strict";var t=WinJS.Utilities,e=WinJS.Navigation,n=WinJS.Application,i=Windows.Storage.ApplicationData.current,s=i.localSettings,a=i.roamingSettings;WinJS.Namespace.define("Custom.Control",{Theme_X:WinJS.Class.define(function(e,n){if(this.element=e,e.winControl=this,this.name=this.element.getAttribute("aria-name"),this.hex=this.element.getAttribute("aria-hex"),this.thex=this.element.getAttribute("aria-thex"),this.element.className="color-box left",this.element.style.backgroundColor=this.hex,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.name==a.values["x-theme"]){var i=document.createElement("i");i.className="md md-done",i.style.color=this.thex,this.element.appendChild(i)}var s=document.createElement("span");s.innerText=this.name,s.style.color=this.thex,this.element.appendChild(s),this.element.onclick=this._changeThemeX.bind(this)},{_changeThemeX:function(){if(!Custom.Utils.isPremium())return void e.navigate("/pages/premium/premium.html");if(this.name!=a.values["x-theme"]){var t=this.name,n=a.values["x-theme"];a.values["x-theme"]=t,Custom.UI.applyTheme(),Custom.Data.themeXList.every(function(t,e){if(t.name==n){var i=Custom.Data.themeXList.getAt(e);return Custom.Data.themeXList.splice(e,1,i),!1}return!0}),Custom.Data.themeXList.every(function(e,n){if(e.name==t){var i=Custom.Data.themeXList.getAt(n);return Custom.Data.themeXList.splice(n,1,i),!1}return!0})}},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Theme_Y:WinJS.Class.define(function(e,n){if(this.element=e,e.winControl=this,this.name=this.element.getAttribute("aria-name"),this.hex=this.element.getAttribute("aria-hex"),this.element.className="color-box left",this.element.style.backgroundColor=this.hex,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.name==a.values["y-theme"]){var i=document.createElement("i");i.className="md md-done",this.element.appendChild(i)}this.element.onclick=this._changeThemeY.bind(this)},{_changeThemeY:function(){if(!Custom.Utils.isPremium())return void e.navigate("/pages/premium/premium.html");if(this.name!=a.values["y-theme"]){var t=this.name,n=a.values["y-theme"];a.values["y-theme"]=t,Custom.UI.applyTheme(),Custom.UI.applyStatusbar(),Custom.Data.themeYList.every(function(t,e){if(t.name==n){var i=Custom.Data.themeYList.getAt(e);return Custom.Data.themeYList.splice(e,1,i),!1}return!0}),Custom.Data.themeYList.forEach(function(e,n){if(e.name==t){var i=Custom.Data.themeYList.getAt(n);return Custom.Data.themeYList.splice(n,1,i),!1}return!0})}},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Listen:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"md-volume-up"),t.addClass(this.element,"win-disposable"),this._disposed=!1,this.player=document.createElement("audio"),this.element.onclick=this._handleClick.bind(this)},{_playSound:function(){var t=this;return new WinJS.Promise(function(e,n,i){t.player.play(),t.player.onended=function(){e()}})},_loadPart:function(t,e,n,i){var s=this;return WinJS.Promise.as().then(function(){Custom.Utils.showNotif(WinJS.Resources.getString("loading_sound").value);var a=encodeURI("https://translate.google.com/translate_tts?ie=UTF-8&tl="+t+"&q="+e+"&textlen="+e.length+"&idx="+n+" &total="+i+"&client=t&prev=input");return WinJS.xhr({url:a,responseType:"blob"}).then(function(t){return t.response},function(){for(var n=Windows.Media.SpeechSynthesis.SpeechSynthesizer.allVoices,i=-1,s=0;s<n.length;s++)if(n[s].language.substr(0,2)==t){i=s;break}if(i>-1){var a=new Windows.Media.SpeechSynthesis.SpeechSynthesizer;return a.voice=n[i],a.synthesizeTextToStreamAsync(e).then(function(t){var e=MSApp.createBlobFromRandomAccessStream(t.ContentType,t);return e})}}).then(function(t){if(t){var e=URL.createObjectURL(t,{oneTimeOnly:!0});return s.player.src=e,s._playSound().then(function(){return!0})}throw"fail to get blob"}).then(function(){return!0})})},_splitToParts:function(t,e){var n=this;return WinJS.Promise.as().then(function(){for(var t=[];e.length>0;){if(e.length>100){var n=e.substr(0,99),i=n.lastIndexOf(" ");-1==i&&(i=n.length-1);var s=n.substr(0,i)}else var s=e;t.push(s),e=e.substr(s.length)}return t}).then(function(e){var i=0,s=function(){return n._loadPart(t,e[i],i,e.length).then(function(t){return 1==t&&i<e.length-1?(i++,s()):void 0})};return s()})},_handleClick:function(){var e=this,n=this.element,i=this.lang,s=this.text;0!=s.length&&(t.hasClass(n,"md-volume-up")?(t.removeClass(n,"md-volume-up"),t.addClass(n,"md-stop"),window.soundPromise&&window.soundPromise.cancel(),window.soundPromise=this._splitToParts(i,s).then(function(){t.addClass(n,"md-volume-up"),t.removeClass(n,"md-stop"),e.player.src="",Custom.Utils.hideNotif()},function(i){"Canceled"!=i.name&&Custom.Utils.popupNoInternet(),t.addClass(n,"md-volume-up"),t.removeClass(n,"md-stop"),e.player.src="",Custom.Utils.hideNotif()})):window.soundPromise&&window.soundPromise.cancel())},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Suggestion:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._useSuggestion.bind(this)},{suggestedinputText:{get:function(){return this._suggestedinputText},set:function(t){this._suggestedinputText=t,this._setup()}},_setup:function(){return this.suggestedinputText?(this.element.innerHTML=toStaticHTML(WinJS.Resources.getString("did_you_mean").value.replace("{1}","<span style='text-decoration: underline;'>"+this.suggestedinputText+"</span>")),void(this.element.hidden=!1)):this.suggestedinputLang&&this.suggestedinputLang!=this.inputLang?(this.element.innerHTML=toStaticHTML(WinJS.Resources.getString("translate_from").value.replace("{1}","<span style='text-decoration: underline;'>"+WinJS.Resources.getString(this.suggestedinputLang).value+"</span>")),void(this.element.hidden=!1)):void(this.element.hidden=!0)},_useSuggestion:function(){return this.suggestedinputText?(Custom.Navigation.navigator.pageControl.inputBox.value=this.suggestedinputText,void(Custom.Navigation.navigator.pageControl.bindingData.inputText=this.suggestedinputText)):this.suggestedinputLang?void(Custom.Navigation.navigator.pageControl.bindingData.inputLang=this.suggestedinputLang):void 0},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Delete:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._deleteHistory.bind(this)},{_deleteHistory:function(t){var e=this.id,n="DELETE FROM history WHERE id="+e;Custom.SQLite.localDatabase.executeAsync(n).then(function(){Custom.Navigation.navigator.pageControl.bindingData.historyList.every(function(t,n){return t.id==e?(Custom.Navigation.navigator.pageControl.bindingData.historyList.splice(n,1),!1):!0}),0==Custom.Navigation.navigator.pageControl.bindingData.historyList.length&&Custom.Navigation.navigator.pageControl.bindingData.loadmoreHistory()})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Star_in_History:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._toggleFavorite.bind(this)},{id:{get:function(){return this._id},set:function(e){if(this._id=e,e){var n=this.element,i="SELECT COUNT(1) FROM favorites WHERE history_id="+e;Custom.SQLite.localDatabase.executeAsync(i).then(function(e){var i=e[0].getFirstValueByName("COUNT(1)");0==i?(t.removeClass(n,"md-star"),t.addClass(n,"md-star-outline")):(t.removeClass(n,"md-star-outline"),t.addClass(n,"md-star"))})}}},_toggleFavorite:function(e){var n=this.element,i=this.id;return t.hasClass(n,"md-star-outline")?(t.removeClass(n,"md-star-outline"),t.addClass(n,"md-star"),WinJS.Promise.as().then(function(){var t="SELECT * FROM history WHERE id = "+i+" LIMIT 0,1";return Custom.SQLite.localDatabase.executeAsync(t)}).then(function(t){var e=Custom.SQLite.entriestoObj(t[0].entries);return e.history_id=e.id,delete e.id,Custom.SQLite.insertObject(Custom.SQLite.localDatabase,"favorites",e)})):(t.addClass(n,"md-star-outline"),t.removeClass(n,"md-star"),WinJS.Promise.as().then(function(){var t="DELETE FROM favorites WHERE history_id = "+i;return Custom.SQLite.localDatabase.executeAsync(t)}))},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Star_in_Favorites:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"md-star"),t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._removeFavorite.bind(this)},{_removeFavorite:function(e){var n=this.element,i=this.id;return t.addClass(n,"md-star-outline"),t.removeClass(n,"md-star"),Custom.Navigation.navigator.pageControl.bindingData.favoriteList.every(function(t,e){return t.id==i?(Custom.Navigation.navigator.pageControl.bindingData.favoriteList.splice(e,1),!1):!0}),WinJS.Promise.as().then(function(){var t="DELETE FROM favorites WHERE id = "+i;return Custom.SQLite.localDatabase.executeAsync(t)})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Copy:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._showOptions.bind(this)},{_copyFunc:function(t){if(Custom.Device.isPhone){var e=new Windows.Foundation.Uri("clipboard:Set?Text="+encodeURIComponent(t));return Windows.System.Launcher.launchUriAsync(e)}var n=new Windows.ApplicationModel.DataTransfer.DataPackage;n.setText(t),Windows.ApplicationModel.DataTransfer.Clipboard.setContent(n)},_showOptions:function(t){var e=this,n=new Windows.UI.Popups.PopupMenu;n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("original_text").value,function(){e._copyFunc(e.inputText)})),n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("translated_text").value,function(){e._copyFunc(e.outputText)})),n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("both").value,function(){e._copyFunc(e.inputText+"\r\n"+e.outputText)}));var i=document.documentElement.msContentZoomFactor;n.showAsync({x:(t.pageX-window.pageXOffset)*i,y:(t.pageY-window.pageYOffset)*i})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Share:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._showOptions.bind(this)},{_shareFunc:function(t){var e=Windows.ApplicationModel.DataTransfer.DataTransferManager.getForCurrentView();e.ondatarequested=function(n){var i=n.request;i.data.properties.title="\x00",i.data.properties.description="\x00",i.data.setText(t),e.ondatarequested=null},Windows.ApplicationModel.DataTransfer.DataTransferManager.showShareUI()},_showOptions:function(t){var e=this,n=new Windows.UI.Popups.PopupMenu;n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("original_text").value,function(){e._shareFunc(e.inputText)})),n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("translated_text").value,function(){e._shareFunc(e.outputText)})),n.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("both").value,function(){e._shareFunc(e.inputText+"\r\n"+e.outputText)}));var i=document.documentElement.msContentZoomFactor;n.showAsync({x:(t.pageX-window.pageXOffset)*i,y:(t.pageY-window.pageYOffset)*i})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Zoom:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.element.onclick=this._showZoom.bind(this)},{_showZoom:function(){e.navigate("/pages/p-zoom/p-zoom.html",{text:this.text})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.element.onclick=null)}}),Write:WinJS.Class.define(function(e,n){var i=this;this.element=e,e.winControl=this,t.addClass(this.element,"write-control"),t.addClass(this.element,"win-disposable"),this._disposed=!1,this.recogList=new WinJS.Binding.List([]),this.recog=document.createElement("div"),this.recog.className="recog-list",this.recogLv=new WinJS.UI.ListView(this.recog,{itemDataSource:this.recogList.dataSource,itemTemplate:t.markSupportedForProcessing(function(e){return e.then(function(e){var n=document.createElement("div");return t.addClass(n,"suggest"),n.innerText=e.data.text,n})}),oniteminvoked:t.markSupportedForProcessing(function(t){i.callEvent(0,i.recogList.getAt(t.detail.itemIndex).text),i.callEvent(2),i.clearAll()})}),this.element.appendChild(this.recog),this.canvas=document.createElement("canvas"),this.element.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.context.canvas.height=this.canvas.clientHeight,this.context.canvas.width=this.canvas.clientWidth,this.context.strokeStyle="#fff",this.context.lineJoin="round",this.context.lineWidth=5,this.action=document.createElement("div"),this.action.className="action",this.backSpace=document.createElement("i"),this.backSpace.className="md md-backspace material-grid-col-1",this.backSpace.onclick=function(t){i.clearAll(),i.callEvent(1)},this.action.appendChild(this.backSpace),this.spaceBar=document.createElement("div"),this.spaceBar.className="space-bar material-grid-col-2",this.spaceBar.innerText="space",this.spaceBar.onclick=function(){i.clearAll(),i.callEvent(2),i.callEvent(0," "),i.callEvent(2)},this.action.appendChild(this.spaceBar),this.doneKey=document.createElement("i"),this.doneKey.className="md md-check material-grid-col-3",this.doneKey.onclick=function(){i.clearAll(),i.callEvent(2)},this.action.appendChild(this.doneKey),this.element.appendChild(this.action);var s=this.canvas.offsetParent.offsetTop+48,a=this.canvas.offsetParent.offsetLeft;this.clearAll(),this.canvas.onmousedown=function(t){i.paint=!0,i.addClick(t.pageX-a,t.pageY-s)},this.canvas.onmousemove=function(t){i.paint&&i.addClick(t.pageX-a,t.pageY-s,!0)},this.canvas.onmouseup=function(t){i.paint=!1,i.clickInk.push([i.clickX,i.clickY,i.clickZ]),i.clickX=new Array,i.clickY=new Array,i.clickZ=new Array,i.getHandwriting()},this.canvas.onmouseleave=function(t){i.paint=!1}},{dlist:[",",".","?","!",":","'",'"',";","@"],callEvent:function(t,e){this.dispatchEvent("edit",{eType:t,eText:e})},getHandwriting:function(){var t=this;this._promise&&this._promise.cancel(),this._promise=WinJS.Promise.as().then(function(){var e="undefined"!=typeof a.values.https?a.values.https:!1,n=1==e?"https":"http",i=n+"://www.google.com/inputtools/request?ime=handwriting&app=mobilesearch&cs=1&oe=UTF-8",o={device:"Mozilla/5.0 (Linux; Android 4.0.4; GT-i9100 Build/IML74K) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.49 Mobile Safari/537.31 ApiKey/1.257",options:"enable_pre_space",requests:[{writing_guide:{writing_area_width:t.context.canvas.width,writing_area_height:t.context.canvas.height},ink:t.clickInk,language:s.values.inputLang}]};return Custom.Utils.showNotif(WinJS.Resources.getString("recognizing").value),WinJS.xhr({type:"post",url:i,headers:{"Content-Type":"application/json"},data:JSON.stringify(o)})}).then(function(t){return t?JSON.parse(t.response)[1][0][1]:void 0}).then(function(e){t.recogList&&e.length>0&&(t.recogList.splice(0,t.recogList.length),e.forEach(function(e){t.recogList.push({text:e})}),t.callEvent(0,e[0]))}).then(null,function(t){"Canceled"!=t.name&&Custom.Utils.popupNoInternet()}).then(function(){Custom.Utils.hideNotif()},function(){Custom.Utils.hideNotif()})},clearAll:function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height),this.clickInk=new Array,this.clickX=new Array,this.clickY=new Array,this.clickZ=new Array,this.clickDrag=new Array,this.startTime=(new Date).getTime(),this.paint=!1;var t=this.recogList;t.splice(0,t.length),this.dlist.forEach(function(e){t.push({text:e})})},addClick:function(t,e,n){this.clickX.push(Math.round(t)),this.clickY.push(Math.round(e)),this.clickDrag.push(n);var i=(new Date).getTime();this.clickZ.push(i-this.startTime);var s=this.clickX.length-1;this.context.beginPath(),this.clickDrag[s]&&s?this.context.moveTo(this.clickX[s-1],this.clickY[s-1]):this.context.moveTo(this.clickX[s]-1,this.clickY[s]),this.context.lineTo(this.clickX[s],this.clickY[s]),this.context.closePath(),this.context.stroke()},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.onedit=null,this.clickX=null,this.clickY=null,this.clickZ=null,this.clickDrag=null,this.clickInk=null,this.paint=null,this.startTime=null,this.recog=null,this.recogLv=null,this.recogList=null,this.canvas=null,this.context=null,this.action=null,this.backSpace=null,this.spaceBar=null,this.doneKey=null,this.dlist=null,this._promise&&this._promise.cancel(),this._promise=null)}}),Speak:WinJS.Class.define(function(e,n){var i=this;this.element=e,e.winControl=this,t.addClass(this.element,"speak-control"),t.addClass(this.element,"win-disposable"),this._disposed=!1,this.listenButton=document.createElement("div"),this.listenButton.className="listen";var s=document.createElement("i");s.className="md md-keyboard-voice",this.listenButton.appendChild(s),this.listenButton.onclick=function(){t.hasClass(i.element,"active")?i.stopRecord():i.startRecord()},this.element.appendChild(this.listenButton),this.waveA=document.createElement("div"),this.waveA.className="wave",this.element.appendChild(this.waveA),this.waveB=document.createElement("div"),this.waveB.className="wave2",this.element.appendChild(this.waveB),this.progress=document.createElement("progress"),this.element.appendChild(this.progress),this.initDevice()},{initDevice:function(){this.captureInitSettings=null,this.captureInitSettings=new Windows.Media.Capture.MediaCaptureInitializationSettings,this.captureInitSettings.audioDeviceId="",this.captureInitSettings.videoDeviceId="",this.captureInitSettings.streamingCaptureMode=Windows.Media.Capture.StreamingCaptureMode.audio,this.systemMediaControls=Windows.Media.SystemMediaTransportControls.getForCurrentView()},releaseDevice:function(){("recording"==this.recordState||null!=this.mediaCaptureMgr)&&(t.removeClass(this.element,"active"),clearInterval(this.checkTime),this.recordState=null,this.mediaCaptureMgr.close(),this.mediaCaptureMgr=null,n.removeEventListener("checkpoint",this.releaseDevice),this.systemMediaControls.onpropertychanged=null)},startRecord:function(){var e=this;t.addClass(this.element,"active"),null==this.mediaCaptureMgr&&(this.mediaCaptureMgr=new Windows.Media.Capture.MediaCapture,WinJS.Application.addEventListener("checkpoint",this.releaseDevice),this.systemMediaControls.onpropertychanged=function(t){t.property===Windows.Media.SystemMediaTransportControlsProperty.soundLevel&&(t.target.soundLevel===Windows.Media.SoundLevel.muted?e.releaseDevice():e.initDevice())}),this.mediaCaptureMgr.initializeAsync(this.captureInitSettings).then(function(){e.checkTime=setInterval(function(){e.stopRecord()},1e4),e.recordState="recording";var t=Windows.Media.MediaProperties.MediaEncodingProfile.createWav(Windows.Media.MediaProperties.AudioEncodingQuality.auto);return t.audio.sampleRate=16e3,t.audio.channelCount=1,e.soundStream=new Windows.Storage.Streams.InMemoryRandomAccessStream,e.mediaCaptureMgr.startRecordToStreamAsync(t,e.soundStream)}).then(null,function(){})},stopRecord:function(){var e=this;clearInterval(this.checkTime),t.removeClass(this.element,"active"),"recording"==this.recordState&&(Custom.Utils.showNotif(WinJS.Resources.getString("recognizing").value),t.addClass(this.element,"loading"),this.mediaCaptureMgr.stopRecordAsync().then(function(){e.recordState=null,e.mediaCaptureMgr.close(),e.mediaCaptureMgr=null,n.removeEventListener("checkpoint",e.release),e.systemMediaControls.onpropertychanged=null;var i=MSApp.createBlobFromRandomAccessStream("audio/l16",e.soundStream);e.soundStream=null;var o="undefined"!=typeof a.values.https?a.values.https:!1,r=1==o?"https":"http",u=r+"://www.google.com/speech-api/v2/recognize?output=json&lang="+s.values.inputLang+"&key=AIzaSyBOti4mM-6x9WDnZIjIeyEU21OpBXqWBgw";e._promise&&e._promise.cancel(),e._promise=WinJS.xhr({type:"POST",url:u,data:i,headers:{"Content-Type":"audio/l16; rate=16000"}}).then(function(n){t.removeClass(e.element,"loading"),Custom.Utils.hideNotif();var i=n.response;if(i.length>14){i=i.substring(14,i.length);var s=JSON.parse(i).result[0].alternative[0].transcript;e.callEvent(0,s),e.callEvent(2)}},function(){Custom.Utils.popupNoInternet(),Custom.Utils.hideNotif(),t.removeClass(e.element,"loading")})}))},callEvent:function(t,e){this.dispatchEvent("edit",{eType:t,eText:e})},dispose:function(){this._disposed||(this._disposed=!0,t.disposeSubTree(this.element),this.onedit=null,this.releaseDevice(),this.listenButton=null,this.waveA=null,this.waveB=null,this.progress=null,this.soundStream=null,this.recordState=null,this.checkTime=null,this.captureInitSettings=null,this.mediaCaptureMgr=null,this.systemMediaControls=null,this._promise&&this._promise.cancel(),this._promise=null)}}),Dictionary:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.type=n.type,this.element.onclick=this._navtoDict.bind(this)},{dict:{get:function(){return this._dict},set:function(t){this._dict=t,t.length>0?this.element.hidden=!1:this.element.hidden=!0}},_navtoDict:function(){e.navigate("/pages/p-dict/p-dict.html",{dict:this.dict,title:this.title,type:this.type,source:this.source})}}),SetData:WinJS.Class.define(function(e,n){this.element=e,e.winControl=this,t.addClass(this.element,"win-disposable"),this._disposed=!1,this.type=n.type,this.element.onclick=this._setData.bind(this)},{_setData:function(){var t=Custom.Navigation.navigator.pageControl;t.bindingData.inputLang=this.inputLang,t.bindingData.outputLang=this.outputLang,t.bindingData.inputText=this.inputText}})}),WinJS.Class.mix(Custom.Control.Write,WinJS.Utilities.createEventProperties("edit"),WinJS.UI.DOMEventMixin),WinJS.Class.mix(Custom.Control.Speak,WinJS.Utilities.createEventProperties("edit"),WinJS.UI.DOMEventMixin)}(),function(){"use strict";WinJS.Namespace.define("Custom.Converter",{languageString:WinJS.Binding.converter(function(t){return"auto"==t?WinJS.Resources.getString("auto").value:WinJS.Resources.getString(t).value}),swapDisabled:WinJS.Binding.converter(function(t){return"auto"==t?!0:!1}),speechDisabled:WinJS.Binding.converter(function(t){var e="md md md-keyboard-voice";if("auto"==t)return e+" disabled";var n=["ar","is","en","pl","eu","pt","bg","ca","hr","iw","de","gl","nl","ko","hi","hu","id","la","ms","no","af","ru","ja","fr","fi","tl","ro","cs","sk","es","th","tr","sv","zh","uk","vi","sr","it","zu"];return n.indexOf(t)>-1?e:e+" disabled"}),gestureDisabled:WinJS.Binding.converter(function(t){var e=["hy","ka","ig","ha","yo","yi","st","my","si","kk","tg","uz","tlh","otq","yua"];return e.indexOf(t)>-1?!0:!1}),cameraDisabled:WinJS.Binding.converter(function(t){var e="md md-camera-alt",n=["en","zh","zh-TW","ce","da","nl","fi","fr","de","el","hu","it","ja","ko","no","pl","pt","ru","es","sv","tr"];return n.indexOf(t)>-1?e:e+" disabled"}),voiceDisabled:WinJS.Binding.converter(function(t){var e=["af","sq","ar","hy","bs","ca","zh","zh-TW","hr","cs","da","nl","en","eo","fi","fr","de","el","ht","hi","hu","is","id","it","ja","ko","la","lv","mk","no","pl","pt","ro","ru","sr","sk","es","sw","sv","ta","th","tr","vi","cy"];return e.indexOf(t)>-1?!1:!0}),forwardDisabled:WinJS.Binding.converter(function(t){return t.trim().length>0?!1:!0})})}(),function(){"use strict";function t(){Custom.Data.languageList.splice(0,Custom.Data.languageList.length),Custom.Data.langArr.forEach(function(t){Custom.Data.languageList.push({language_id:t,language_name:WinJS.Resources.getString(t).value,main:1})}),Custom.Data.languageList.sort(function(t,e){var n=t.language_name,i=e.language_name;return n.localeCompare(i)})}var e=["af","sq","ar","hy","az","eu","be","bn","bs","bg","ca","ceb","ny","zh","zh-TW","hr","cs","da","nl","en","eo","et","tl","fi","fr","gl","ka","de","el","gu","ht","ha","iw","hi","hmn","hu","is","ig","id","ga","it","ja","jw","kn","kk","km","ko","lo","la","lv","lt","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","fa","pl","pt","pa","ro","ru","sr","st","si","sk","sl","so","es","su","sw","sv","tg","ta","te","th","tr","uk","ur","uz","vi","cy","yi","yo","zu","tlh","otq","yua"],n=new WinJS.Binding.List([{name:"light",hex:"#fff",thex:"#000"},{name:"dark",hex:"#000",thex:"#fff"}]),i=new WinJS.Binding.List([{name:"red",statusbar:{r:211,g:47,b:47,a:1},hex:"#F44336"},{name:"pink",statusbar:{r:194,g:24,b:91,a:1},hex:"#E91E63"},{name:"purple",statusbar:{r:123,g:31,b:162,a:1},hex:"#9C27B0"},{name:"deep-purple",statusbar:{r:81,g:45,b:168,a:1},hex:"#673AB7"},{name:"indigo",statusbar:{r:48,g:63,b:159,a:1},hex:"#3F51B5"},{name:"blue",statusbar:{r:13,g:71,b:161,a:1},hex:"#1976D2"},{name:"light-blue",statusbar:{r:1,g:87,b:155,a:1},hex:"#0288D1"},{name:"cyan",statusbar:{r:0,g:151,b:167,a:1},hex:"#00BCD4"},{name:"teal",statusbar:{r:0,g:121,b:107,a:1},hex:"#009688"},{name:"green",statusbar:{r:56,g:142,b:60,a:1},hex:"#4CAF50"},{name:"light-green",statusbar:{r:85,g:139,b:47,a:1},hex:"#689f38"},{name:"deep-orange",statusbar:{r:230,g:74,b:25,a:1},hex:"#FF5722"},{name:"brown",statusbar:{r:93,g:64,b:55,a:1},hex:"#795548"},{name:"grey",statusbar:{r:33,g:33,b:33,a:1},hex:"#616161"},{name:"blue-grey",statusbar:{r:69,g:90,b:100,a:1},hex:"#607D8B"}]),s=new WinJS.Binding.List([]),a=s.createGrouped(function(t){return t.main},function(t){return{main:t.main}},function(t,e){return t-e});WinJS.Namespace.define("Custom.Data",{langArr:e,languageList:s,groupedlanguageList:a,loadlanguageList:t,themeXList:n,themeYList:i})}(),function(){"use strict";var t=Windows.ApplicationModel.Activation,e=WinJS.Application,n=WinJS.Navigation,i=WinJS.Utilities.Scheduler,s=WinJS.UI;WinJS.Utilities,Windows.ApplicationModel.Resources.Core;WinJS.Binding.optimizeBindingReferences=!0;var a=Windows.Storage.ApplicationData.current,o=a.localSettings,r=a.roamingSettings;e.onactivated=function(a){var u=WinJS.Promise.as().then(function(){var e=Windows.Globalization.ApplicationLanguages.languages[0];if("zh-CN"==e&&"undefined"!=typeof r.values["chinese-server"]&&(r.values["chinese-server"]=!0),a.detail.previousExecutionState!==t.ApplicationExecutionState.terminated&&Custom.Device.isPhone&&"en-US"==e){var n=new Windows.Foundation.Uri("ms-appx:///cortana.xml");Windows.Storage.StorageFile.getFileFromApplicationUriAsync(n).then(function(t){return Windows.Media.SpeechRecognition.VoiceCommandManager.installCommandSetsFromStorageFileAsync(t)}).then(function(){var t=[];return Custom.Data.langArr.forEach(function(e){t.push(WinJS.Resources.getString(e).value)}),Windows.Media.SpeechRecognition.VoiceCommandManager.installedCommandSets.lookup("modern_translate").setPhraseListAsync("outputLang",t)}).then(null,function(t){})}return Custom.UI.applyTheme().then(function(){return Custom.UI.applyStatusbar()}).then(function(){return Custom.SQLite.setupDatabase()})}).then(function(){if(a.detail.kind==t.ActivationKind.protocol){var i=a.detail.uri;return n.history=e.sessionState.history||{},n.history.current.initialPlaceholder=!0,s.disableAnimations(),s.processAll().then(function(){if(Custom.Data.loadlanguageList(),"translate"==i.path){var t=new Windows.Foundation.WwwFormUrlDecoder(i.query);try{var s=t.getFirstValueByName("inputlang"),a=t.getFirstValueByName("outputlang"),r=t.getFirstValueByName("inputtext");(s&&Custom.Data.langArr.indexOf(s)>-1||"auto"==s)&&(o.values.inputLang=s),a&&Custom.Data.langArr.indexOf(a)>-1&&(o.values.outputLang=a),e.sessionState.inputText=r}catch(u){}}return n.navigate(n.location||Custom.Navigation.navigator.home,n.state)})}if(a.detail.kind===t.ActivationKind.shareTarget){var r=a.detail.shareOperation;if(r.data.contains(Windows.ApplicationModel.DataTransfer.StandardDataFormats.text))return r.data.getTextAsync().then(function(t){return n.history=e.sessionState.history||{},n.history.current.initialPlaceholder=!0,s.disableAnimations(),s.processAll().then(function(){return Custom.Data.loadlanguageList(),e.sessionState.inputText=t,n.navigate(Custom.Navigation.navigator.home)})},function(t){r.reportError()})}if(a.detail.kind===t.ActivationKind.voiceCommand){for(var u=a.detail.result,l=(u.rulePath[0],u.semanticInterpretation.properties.inputText[0]),c=u.semanticInterpretation.properties.outputLang[0],d="en",h=0;h<Custom.Data.langArr.length;h++){var p=Custom.Data.langArr[h],m=WinJS.Resources.getString(p).value;if(c==m){d=p;break}}return n.history=e.sessionState.history||{},n.history.current.initialPlaceholder=!0,s.disableAnimations(),s.processAll().then(function(){return Custom.Data.loadlanguageList(),o.values.inputLang="auto",o.values.outputLang=d,e.sessionState.inputText=l,n.navigate(Custom.Navigation.navigator.home)})}return a.detail.kind===t.ActivationKind.pickFileContinuation?(s.disableAnimations(),s.processAll().then(function(){return a.detail.detail[0].files[0]?n.navigate("/pages/p-camera/p-camera.html",{file:a.detail.detail[0].files[0]}):void 0})):a.detail.kind===t.ActivationKind.launch?(n.history=e.sessionState.history||{},n.history.current.initialPlaceholder=!0,s.disableAnimations(),s.processAll().then(function(){if(Custom.Data.loadlanguageList(),"tile_shortcut"==a.detail.arguments.substr(0,13)){var t=a.detail.arguments.substr(13,a.detail.arguments.length-13).split("_");return o.values.inputLang=t[0],o.values.outputLang=t[1],e.sessionState.inputText="",n.navigate(Custom.Navigation.navigator.home)}return n.navigate(n.location||Custom.Navigation.navigator.home,n.state)})):void 0}).then(function(){return i.requestDrain(i.Priority.aboveNormal+1)}).then(function(){s.enableAnimations()});u.then(function(){if(0==Custom.Utils.isPremium()&&1!=e.sessionState.remind){var t=new Windows.UI.Popups.MessageDialog(WinJS.Resources.getString("premium_introduce").value,"Premium");t.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("buy_now").value,function(){n.navigate("/pages/premium/premium.html")})),t.commands.append(new Windows.UI.Popups.UICommand(WinJS.Resources.getString("later").value)),t.defaultCommandIndex=0,t.cancelCommandIndex=1,e.sessionState.remind=!0,t.showAsync()}}),u.done(),a.setPromise(u)},e.onbackclick=function(t){if("/pages/home/home.html"==n.history.current.location){var e=Custom.Navigation.navigator.pageControl;if("hidden"!=e.bindingData.selectMode)return e.bindingData.selectMode="hidden",!0;if(""!=e.bindingData.imeMode)return e.bindingData.imeMode="",!0;if(1==e.bindingData.expandinputBox)return e.bindingData.expandinputBox=!1,!0}},e.oncheckpoint=function(t){if(e.sessionState.history=n.history,window.soundPromise&&window.soundPromise.cancel(),null!=window.dispRequest&&(window.dispRequest.requestRelease(),window.dispRequest=null),"/pages/home/home.html"==n.history.current.location){var i=Custom.Navigation.navigator.pageControl;""!=i.bindingData.imeMode&&(i.bindingData.imeMode="")}if("/pages/p-livecamera/p-livecamera.html"==n.history.current.location){var i=Custom.Navigation.navigator.pageControl;i.disposeCamera()}},e.start()}(),function(){"use strict";var t=WinJS.Navigation;WinJS.Namespace.define("Custom.Navigation",{PageControlNavigator:WinJS.Class.define(function(e,n){function i(t,e,n,i){t.addEventListener(e,n,i),s._eventHandlerRemover.push(function(){t.removeEventListener(e,n)})}this._element=e||document.createElement("div"),this._element.appendChild(this._createPageElement()),this.home=n.home,this._eventHandlerRemover=[];
var s=this;i(t,"navigating",this._navigating.bind(this),!1),i(t,"navigated",this._navigated.bind(this),!1),window.onresize=this._resized.bind(this),Custom.Navigation.navigator=this},{home:"",_element:null,_lastNavigationPromise:WinJS.Promise.as(),_lastViewstate:0,pageControl:{get:function(){return this.pageElement&&this.pageElement.winControl}},pageElement:{get:function(){return this._element.firstElementChild}},dispose:function(){if(!this._disposed){this._disposed=!0,WinJS.Utilities.disposeSubTree(this._element);for(var t=0;t<this._eventHandlerRemover.length;t++)this._eventHandlerRemover[t]();this._eventHandlerRemover=null}},_createPageElement:function(){var t=document.createElement("div");return t.setAttribute("dir",window.getComputedStyle(this._element,null).direction),t.style.position="absolute",t.style.visibility="hidden",t.style.width="100%",t.style.height="100%",t},_getAnimationElements:function(){return this.pageControl&&this.pageControl.getAnimationElements?this.pageControl.getAnimationElements():this.pageElement.querySelector(".material-content")},_navigated:function(){this.pageElement.style.visibility="",WinJS.UI.Animation.enterPage(this._getAnimationElements()).done(),WinJS.Resources.processAll(this.pageElement)},_navigating:function(t){function e(){if(i._element.childElementCount>1){var t=i._element.firstElementChild;t.winControl&&(t.winControl.unload&&t.winControl.unload(),t.winControl.dispose()),t.parentNode.removeChild(t),t.innerText=""}}var n=this._createPageElement();this._element.appendChild(n),this._lastNavigationPromise.cancel();var i=this;this._lastNavigationPromise=WinJS.Promise.as().then(function(){return WinJS.UI.Pages.render(t.detail.location,n,t.detail.state)}).then(e,e),t.detail.setPromise(this._lastNavigationPromise)},_resized:function(t){this.pageControl&&this.pageControl.updateLayout&&this.pageControl.updateLayout.call(this.pageControl,this.pageElement)}})})}(),function(){"use strict";function t(t){return t.reduce(function(t,e){return t.then(e)},WinJS.Promise.wrap())}function e(t,e){return t.executeAsync("BEGIN TRANSACTION").then(e).then(function(e){var n=e;return t.executeAsync("COMMIT").then(function(){return n})},function(e){var n=e;return t.executeAsync("COMMIT").then(function(){throw n})})}function n(n,i){var s=i.map(function(t){return n.executeAsync.bind(n,t)});return e(n,function(){return t(s)})}function i(n,i){var s=i.map(function(t){return n.bindAndExecuteAsync.bind(n,t.statement,t.parameters)});return e(n,function(){return t(s)})}function s(t,e,n){return WinJS.Promise.as().then(function(){var i=[],s="(",a="(",o=-1;for(var r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null==u)continue;o++,o>0&&(s+=", ",a+=","),s+=r,a+="?","string"!=typeof u&&(u=JSON.stringify(u)),n[r]=u,i.push(n[r])}s+=")",a+=")";var l="INSERT INTO "+e+" "+s+" VALUES "+a;return t.bindAndExecuteAsync(l,i)}).then(function(){var e="SELECT last_insert_rowid();";return t.executeAsync(e)}).then(function(t){return n.id=t[0].getFirstValueByName("last_insert_rowid()"),n})}function a(t){var e={};return t.forEach(function(t){e[t.name]=t.value}),e}function o(){return SQLite.Database.openDatabaseInFolderAsync(Windows.Storage.ApplicationData.current.localFolder,"ft.db").then(function(t){return Custom.SQLite.localDatabase=t,Custom.SQLite.executeStatementsAsTransactionAsync(Custom.SQLite.localDatabase,["CREATE TABLE IF NOT EXISTS history (id INTEGER PRIMARY KEY AUTOINCREMENT, inputLang TEXT NOT NULL, outputLang TEXT NOT NULL, inputText TEXT NOT NULL, outputText TEXT NOT NULL, inputRoman TEXT, outputRoman TEXT, inputDict TEXT, outputDict TEXT, source TEXT NOT NULL);","CREATE TABLE IF NOT EXISTS favorites (id INTEGER PRIMARY KEY AUTOINCREMENT, history_id INTEGER, inputLang TEXT NOT NULL, outputLang TEXT NOT NULL, inputText TEXT NOT NULL, outputText TEXT NOT NULL, inputRoman TEXT, outputRoman TEXT, inputDict TEXT, outputDict TEXT, source TEXT NOT NULL);"])})}var r=(WinJS.Application,WinJS.Utilities.Scheduler,Windows.Storage.ApplicationData.current);r.localSettings,r.roamingSettings;WinJS.Namespace.define("Custom.SQLite",{localDatabse:null,executeAsTransactionAsync:e,executeStatementsAsTransactionAsync:n,bindAndExecuteStatementsAsTransactionAsync:i,insertObject:s,entriestoObj:a,setupDatabase:o})}(),function(){"use strict";function t(t,e,n){return WinJS.Promise.as().then(function(){if(encodeURIComponent(n).length>1e3)return WinJS.Promise.as().then(function(){for(var i=n.substr(0,100),s=200;s<n.length&&!(encodeURIComponent(n.substr(0,s)).length>1e3);s+=100)i=n.substr(0,s);var a=i.lastIndexOf(" ");-1==a&&(a=i.length-1);var o,r,u=i.substr(0,a),l=n.substr(a+1,n.length-u.length),c=[];return c.push(Custom.Translate.translateByGoogle(t,e,u).then(function(t){o=t})),c.push(Custom.Translate.translateByGoogle(t,e,l).then(function(t){r=t})),WinJS.Promise.join(c).then(function(){return o&&r?{inputLang:o.inputLang,suggestedinputLang:o.outputLang,inputText:o.inputText+r.inputText,suggestedinputText:null,inputRoman:o.inputRoman+r.inputRoman,inputDict:"",outputLang:e,outputText:o.outputText+r.outputText,outputRoman:o.outputRoman+r.outputRoman,outputDict:"",source:"google"}:void 0})});var i=encodeURI(Custom.Utils.getDomain()+"/translate_a/single?client=t&sl="+t+"&tl="+e+"&hl=en&dt=bd&dt=ex&dt=ld&dt=md&dt=qc&dt=rw&dt=rm&dt=ss&dt=t&dt=at&ie=UTF-8&oe=UTF-8&prev=btn&ssel=4&tsel=4&q="+n);return WinJS.xhr({type:"get",url:i,responseType:"json"}).then(function(t){var i=t.response;i=Custom.Utils.standardlizeJSON(i);var s=JSON.parse(i),a="",o="",r="";s[0]&&s[0].forEach(function(t){t[0]&&(a+=t[0]),t[0]||(t[2]&&(r+=t[2]),t[3]&&(o+=t[3]))});var u=s[2];"zh-CN"==u&&(u="zh");var l;(s[11]||s[12]||s[13]||s[14])&&(l=[s[11],s[12],s[13],s[14]]);var c,l=l,d=s[1];s[8]&&(c=s[8][0][0]),"zh-CN"==c&&(c="zh");var h;return s[7]&&(h=s[7][1]),{inputLang:u,suggestedinputLang:c,inputText:n,suggestedinputText:h,inputRoman:o,inputDict:l?JSON.stringify(l):"",outputLang:e,outputText:a,outputRoman:r,outputDict:d?JSON.stringify(d):"",source:"google"}})})}function e(t,e,n){for(var i=Custom.Utils.getDomain()+"/translate_a/t?client=mt&sl="+t+"&tl="+e+"&hl=en&v=1.0",s=[],a=0;a<n.length;a++){if(encodeURI(i+"&q"+n[a]).length>2e3){s=n.slice(a,n.length);break}i+="&q=",i+=n[a]}return i=encodeURI(i),WinJS.xhr({type:"get",url:i,responseType:"json"}).then(function(t){return JSON.parse(t.response)})}function n(t,e,n){return WinJS.Promise.as().then(function(){if(o.sessionState.bingAppId)return o.sessionState.bingAppId;var t="http://www.bing.com/translator/dynamic/213366/js/LandingPage.js";return WinJS.xhr({type:"get",url:t}).then(function(t){return o.sessionState.bingAppId=t.response.substr(t.response.indexOf("appId:")+6,47),o.sessionState.bingAppId})}).then(function(i){var s=t;"auto"==s?s="":"zh"==s?s="zh-CHS":"zh-TW"==s&&(s="zh-CHT");var a=e;"zh"==a?a="zh-CHS":"zh-TW"==a&&(a="zh-CHT");var r=n.split("\n"),u=encodeURI("http://api.microsofttranslator.com/v2/ajax.svc/TranslateArray2?appId="+i+"&texts="+JSON.stringify(r)+"&from="+s+"&to="+a+"&options={}");return WinJS.xhr({type:"get",url:u,responseType:"json"}).then(function(i){var s=JSON.parse(i.response);if("object"!=typeof s)throw o.sessionState.bingAppId=null,"appid_expired";"auto"==t&&(t=s[0].From,"zh-CHS"==t?t="zh":"zh-CHT"==t&&(t="zh-TW"));var a="";return s.forEach(function(t){a+=t.TranslatedText+"\n"}),{inputLang:t,suggestedinputLang:null,inputText:n,suggestedinputText:null,inputRoman:"",inputDict:"",outputLang:e,outputText:a,outputRoman:"",outputDict:"",source:"bing"}})}).then(function(i){if(n.indexOf(" ")>-1)return i;var s=encodeURI("http://www.microsofttranslator.com/dictionary.ashx?from="+t+"&to="+e+"&text="+n);return WinJS.xhr({type:"get",url:s,responseType:"json"}).then(function(t){return t.response.length<=25?i:(i.outputDict=t.response.substring(21,t.response.length-4),i)},function(t){return i})})}function i(t,e,n){return WinJS.Promise.as().then(function(){if(o.sessionState.bingAppId)return o.sessionState.bingAppId;var t="http://www.bing.com/translator/dynamic/0/js/LandingPage.js";return WinJS.xhr({type:"get",url:t}).then(function(t){return o.sessionState.bingAppId=t.response.substr(459,47),o.sessionState.bingAppId})}).then(function(i){"auto"==t?t="":"zh"==t?t="zh-CHS":"zh-TW"==t&&(t="zh-CHT");var s=JSON.stringify(n),a=encodeURI("http://api.microsofttranslator.com/v2/ajax.svc/TranslateArray2?appId="+i+"&texts="+s+"&from="+t+"&to="+e+"&options={}");return WinJS.xhr({type:"get",url:a,responseType:"json"}).then(function(t){var e=JSON.parse(t.response);if("object"!=typeof e)throw o.sessionState.bingAppId=null,"appid_expired";var n=[];return e.forEach(function(t){n.push(t.TranslatedText)}),n})})}function s(t,e,n){return WinJS.Promise.as().then(function(){return n.length<1?void 0:["tlh","otq","yua"].indexOf(t)>-1?l.indexOf(e)>-1?Custom.Translate.translateByBing(t,e,n):Custom.Translate.translateByBing(t,"en",n).then(function(t){return Custom.Translate.translateByGoogle("en",e,t.outputText)}):["tlh","otq","yua"].indexOf(e)>-1?l.indexOf(t)>-1?Custom.Translate.translateByBing(t,e,n):Custom.Translate.translateByGoogle(t,"en",n).then(function(t){return Custom.Translate.translateByBing("en",e,t.outputText)}):1==u.values.bing&&l.indexOf(t)>-1&&l.indexOf(e)>-1?Custom.Translate.translateByBing(t,e,n):Custom.Translate.translateByGoogle(t,e,n)}).then(null,function(t){})}function a(t,e,n){return WinJS.Promise.as().then(function(){return["tlh","otq","yua"].indexOf(t)>-1?l.indexOf(e)>-1?Custom.Translate.translateinBatchByBing(t,e,n):Custom.Translate.translateinBatchByBing(t,"en",n).then(function(t){return Custom.Translate.translateinBatchByGoogle("en",e,t)}):["tlh","otq","yua"].indexOf(e)>-1?l.indexOf(t)>-1?Custom.Translate.translateinBatchByBing(t,e,n):Custom.Translate.translateinBatchByGoogle(t,"en",n).then(function(t){return Custom.Translate.translateinBatchByBing("en",e,t.outputText)}):1==u.values.bing&&l.indexOf(t)>-1&&l.indexOf(e)>-1?Custom.Translate.translateinBatchByBing(t,e,n):Custom.Translate.translateinBatchByGoogle(t,e,n)}).then(null,function(t){})}var o=WinJS.Application,r=Windows.Storage.ApplicationData.current,u=(r.localSettings,r.roamingSettings),l=["auto","he","pl","ar","hi","pt","bg","ca","hu","ro","zh","id","ru","zh-TW","it","sk","cs","ja","sl","da","es","nl","sv","en","ko","th","et","lv","tr","fi","lt","uk","fr","ms","ur","de","mt","vi","el","no","cy","ht","fa","tlh","otq","yua"];WinJS.Namespace.define("Custom.Translate",{translateByGoogle:t,translateinBatchByGoogle:e,translateByBing:n,translateinBatchByBing:i,translate:s,translateinBatch:a})}(),function(){"use strict";function t(t){for(var e=document.styleSheets,n=0,i=e.length;i>n;n++)if(e[n].href==t)return;var s=document.createElement("link");s.rel="stylesheet",s.href=t,document.getElementsByTagName("head")[0].appendChild(s)}function e(){return WinJS.Promise.as().then(function(){"undefined"==typeof a.values["x-theme"]&&(a.values["x-theme"]="light"),"undefined"==typeof a.values["y-theme"]&&(a.values["y-theme"]="light-green");var e=a.values["x-theme"],n=a.values["y-theme"];t("/Microsoft.WinJS.4.0/css/ui-"+e+".css"),t("/WinJS.Material/css/material-"+e+".css"),t("/WinJS.Material/css/themes/"+n+".css"),document.body.setAttribute("x-theme",e),document.body.setAttribute("y-theme",n),Custom.Device.isPhone&&i.addClass(document.body,"phone")})}function n(){return WinJS.Promise.as().then(function(){var t=null,e={r:255,g:255,b:255,a:1},n=a.values["y-theme"];if(Custom.Data.themeYList.every(function(e){return e.name==n?(t=e.statusbar,!1):!0}),Custom.Device.isPhone){var i=Windows.UI.ViewManagement.StatusBar.getForCurrentView();0!=a.values.statusbar?t&&(i.backgroundColor=t,i.foregroundColor={r:255,g:255,b:255,a:1},i.backgroundOpacity=1,i.showAsync()):i.hideAsync()}else{var s=Windows.UI.ViewManagement.ApplicationView.getForCurrentView();s.titleBar&&(s.titleBar.backgroundColor=t,s.titleBar.foregroundColor=e,s.titleBar.buttonBackgroundColor=t,s.titleBar.buttonForegroundColor=e)}})}var i=(WinJS.Application,WinJS.Utilities),s=Windows.Storage.ApplicationData.current,a=(s.localSettings,s.roamingSettings);WinJS.Namespace.define("Custom.UI",{importCSS:t,applyTheme:e,applyStatusbar:n})}(),function(){"use strict";function t(t){for(var e=0,n="";e<t.length;)if(","==t[e]||"["==t[e])switch(t[e+1]){case",":case"]":n+=t[e]+"null",e++;break;case'"':for(var i=t.substr(e+2),s=i.indexOf('"');"\\"==i[s-1]&&"\\"!=i[s-2];)s=s+1+i.substr(s+1).indexOf('"');s=e+2+s,n+=t.substring(e,s+1),e=s+1;break;default:n+=t[e],e++}else n+=t[e],e++;return n}function e(){return WinJS.Promise.as().then(function(){if("undefined"==typeof c.values.purchased){var t=Windows.ApplicationModel.Store.CurrentApp,e=t.licenseInformation;return e.productLicenses.lookup("premium").isActive?void(c.values.purchased=!0):1==e.isTrial?void(c.values.purchased=!1):t.getAppReceiptAsync().then(function(t){var e=new Windows.Data.Xml.Dom.XmlDocument;e.loadXml(t);var n=new Date(e.getElementsByTagName("AppReceipt")[0].attributes.getNamedItem("PurchaseDate").value),i=new Date("2015-03-29T03:00:00Z");i>=n&&(c.values.purchased=!0)})}}).then(null,function(t){})}function n(){var t=Windows.ApplicationModel.Store.CurrentApp,e=t.licenseInformation;return 1==e.productLicenses.lookup("premium").isActive||1==c.values.purchased?!0:!1}function i(){return Custom.Utils.popupMsg(WinJS.Resources.getString("no_internet").value,WinJS.Resources.getString("please_check_internet").value)}function s(t,e){return null==u?(u=new Windows.UI.Popups.MessageDialog(e,t),u.showAsync().then(function(){u=null})):void 0}function a(t){if(Custom.Device.isPhone&&0!=c.values.statusbar){var e=Windows.UI.ViewManagement.StatusBar.getForCurrentView();return e.progressIndicator.progressValue=null,e.progressIndicator.text=t,e.progressIndicator.showAsync()}navProgress.hidden=!1}function o(){if(Custom.Device.isPhone&&0!=c.values.statusbar){var t=Windows.UI.ViewManagement.StatusBar.getForCurrentView();return t.progressIndicator.progressValue=0,t.progressIndicator.hideAsync()}navProgress.hidden=!0}function r(){var t="undefined"!=typeof c.values["chinese-server"]?c.values["chinese-server"]:!1,e="undefined"!=typeof c.values.https?c.values.https:!1;return 1==t?"http://translate.google.cn":e?"https://translate.google.com":"http://translate.google.com"}var u,l=(WinJS.Utilities,Windows.Storage.ApplicationData.current),c=(l.localSettings,l.roamingSettings);WinJS.Namespace.define("Custom.Utils",{getPurchaseDateSync:e,isPremium:n,standardlizeJSON:t,popupMsg:s,popupNoInternet:i,showNotif:a,hideNotif:o,getDomain:r})}();